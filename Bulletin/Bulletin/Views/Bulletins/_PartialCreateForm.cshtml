@using Bulletin.Repositories;
@using Bulletin.Models;
@using Bulletin.Common;


<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Административные районы</th>
            <th></th>
            <th>Облачность</th>
            <th>Осадки</th>
            <th>Явления</th>
            <th>Ветер</th>            
            <th>Температура</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var territory in ((IRepository<Territory>)(new TerritoryRepository())).GetAll())
        {
            <tr>
                <td rowspan="2">@territory.Name</td>
                <td>
                        
                        <label for="mySubmit" class="btn btn-default"><i class="glyphicon glyphicon-copy"></i> </label>
    <input id="mySubmit" type="text" value="Go" class="hidden" />



                      <a href="#" class="btn btn-default">
                        <span class="glyphicon glyphicon-paste"></span>
                      </a>
                </td>
                <td class="cursorClick" onclick="handleCloudinessNight(@(territory.ID))"></td>
                <td class="cursorClick" onclick="handlePrecipitationNight(@(territory.ID))"></td>
                <td id="test" class="cursorClick"></td>
                <td class="cursorClick"></td>
                <td class="cursorClick"></td>
            </tr>
            <tr>
                <td>
                        
                      <a href="#" class="btn btn-default">
                        <span class="glyphicon glyphicon-copy"></span>
                      </a>

                      <a href="#" class="btn btn-default">
                        <span class="glyphicon glyphicon-paste"></span>
                      </a>
                </td>
                <td class="cursorClick" onclick="handleCloudinessDay(@(territory.ID))"></td>
                <td class="cursorClick" onclick="handlePrecipitationDay(@(territory.ID))"></td>
                <td class="cursorClick"></td>
                <td class="cursorClick"></td>
                <td class="cursorClick"></td>
            </tr>
        }
    </tbody>
</table>



<script>
    function handleCloudinessNight(id) {
        $("#TerritoryID").text(id);
        $("#cloudiness-panel").attr("class", "panel panel-primary");
        $("#cloudiness-panel-heading").text("Ночью");
        $("#ModalCloudiness").modal('show');
    }

    function handleCloudinessDay(id) {
        $("#TerritoryID").text(id);
        $("#cloudiness-panel").attr("class", "panel panel-success");
        $("#cloudiness-panel-heading").text("Днём");
        $("#ModalCloudiness").modal('show');
    }

    function handlePrecipitationNight(id) {
        $("#TerritoryID").text(id);
        $("#precipitation-panel").attr("class", "panel panel-primary");
        $("#precipitation-panel-heading").text("Ночью");
        $("#ModalPrecipitation").modal('show');
    }

    function handlePrecipitationDay(id) {
        $("#TerritoryID").text(id);
        $("#precipitation-panel").attr("class", "panel panel-success");
        $("#precipitation-panel-heading").text("Днём");
        $("#ModalPrecipitation").modal('show');
    }

</script>




    <div id="ModalCloudiness" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Укажите облачность</h4>
                </div>
                <div class="modal-body">
                    <div id="TerritoryID">
                    </div>
                    @Html.Partial("Params\\_Cloudiness", new ViewDataDictionary { { "forecast", ViewBag.forecast } })    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Отмена</button>
                    <button type="button" class="btn btn-primary">Сохранить</button>
                </div>
            </div>
        </div>
    </div>
    

    <div id="ModalPrecipitation" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Укажите осадки</h4>
                </div>
                <div class="modal-body">
                    <div id="TerritoryID">
                    </div>
                    @Html.Partial("Params\\_Precipitation", new ViewDataDictionary { { "forecast", ViewBag.forecast } })    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Отмена</button>
                    <button type="button" class="btn btn-primary">Сохранить</button>
                </div>
            </div>
        </div>
    </div>


    